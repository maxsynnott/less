<div class="modal-body">
	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>

	<div class="container-fluid pt-4">
		<div class="row align-items-center">
			<div class="col-12 col-lg-6 text-center">
				<% if @item.image_count.positive? %>
					<% if @item.image_count > 1 %>
						<!-- Slider main container -->
						<div class="swiper-container" data-controller="swiper">
					    <!-- Additional required wrapper -->
					    <div class="swiper-wrapper align-items-center">
				        <!-- Slides -->
				        <div class="swiper-slide">
				        	<%= image_tag @item.main_image, alt: @item.main_image.filename, class: 'img-fluid' %>
				        </div>

				        <% @item.images.each do |image| %>
				        	<div class="swiper-slide">
				        		<%= image_tag image, alt: image.filename, class: 'img-fluid' %>
				        	</div>
				        <% end %>
					    </div>

					    <div class="swiper-button-prev" style="color: lightgray;"></div>
			        <div class="swiper-button-next" style="color: lightgray;"></div>
						</div>
					<% else %>
						<%= image_tag @item.main_image, alt: @item.main_image.filename, class: "img-fluid" %>
					<% end %>
				<% end %>
			</div>

			<div class="col-12 col-lg-6">
				<div class="card border-0">
					<div class="card-body">
						<h2 class="card-title">
							<%= @item.name %>
						</h2>

						<h3 class="card-subtitle mt-2 text-success">
							<%= number_to_currency(@item.price_for(@item.display_price_quantity)) %>

							<small class="text-muted">
								per <%= @item.display_unit %>
							</small>
						</h3>

						<p class="card-text mt-3">
							<%= @item.description %>
						</p>

						<nav class="border-top mt-3 pt-3">
							<div class="nav nav-tabs" id="nav-tab" role="tablist">
								<% @item.units.each_with_index do |unit, i| %>
									<%= link_to unit.pluralize.capitalize, "#tab_#{unit}", role: "tab", class: "item-tab-link nav-item nav-link #{i.zero? ? 'active' : ''}", data: { toggle: "tab" } %>
								<% end %>
						  </div>
						</nav>

						<div class="tab-content" id="nav-tabContent">
							<% @item.units.each_with_index do |unit, i| %>
								<div 
									class="tab-pane fade <%= i.zero? ? 'show active' : '' %>"
									id="tab_<%= unit %>"
									role="tabpanel"
									data-controller="item"
									data-item-price="<%= @item.price %>"
									data-item-unit="<%= unit %>"
								>
									<%= simple_form_for CartItem.new(item_id: @item.id, unit: unit), html: { class: "mt-3" }, remote: true do |f| %>
										<%= f.hidden_field :item_id %>
										<%= f.hidden_field :unit %>

										<%= f.input :quantity, hint: "Enter your desired quantity in #{unit.pluralize}", input_html: { data: { target: "item.input", action: "input->item#updateValues" } } %>

										<div class="row">
											<div class="col-6">
												<ul class="list-group list-group-flush">
													<li class="list-group-item" data-target="item.quantity">
														Chosen quantity
													</li>

													<li class="list-group-item" data-target="item.price">
														Price
													</li>
												</ul>
											</div>

											<div class="col-6 d-flex justify-content-end align-items-center">
												<%= f.submit "Add to cart", class: "btn btn-success btn-lg" %>
											</div>
										</div>
									<% end %>
								</div>
							<% end %>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal-footer mx-5">
	<div class="container-fluid text-center">
		<%= link_to "More product information", item_path(@item), class: "text-secondary text-decoration-none" %>
	</div>
</div>
