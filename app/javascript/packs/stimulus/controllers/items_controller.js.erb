import { Controller } from "stimulus"

export default class extends Controller {
	static targets = ["sort"]

	connect() {
		$(this.sortTarget).on('select2:select', (event) => {
			this.submitForm()
		})
	}

	submitForm() {
		let params = new URLSearchParams(new URL(location.href).search)
		params.set('sort', $(this.sortTarget).find(':selected').val())

		window.location.href = `${window.location.origin}${window.location.pathname}?${params.toString()}`
	}
}
