import { Controller } from "stimulus"

export default class extends Controller {
	static targets = ["input", "price"]

	connect() {
		console.log("Test")

		this.price = parseFloat(this.data.get('price'), 10)

		this.formatter = new Intl.NumberFormat("de", {
			style: "currency",
			currency: "EUR"
		})
	}

	updatePrice(price) {
		this.priceTarget.innerText = this.formatter.format(price)
	}

	quantityChange(event) {
		let quantity = parseInt(this.inputTarget.value, 10)

		if (isNaN(quantity)) {
			quantity = 0
		}

		const price = quantity * this.price

		this.updatePrice(price)
	}
}
