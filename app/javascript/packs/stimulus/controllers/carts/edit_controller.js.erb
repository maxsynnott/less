import { Controller } from "stimulus"

export default class extends Controller {
	checkout(event) {
		fetch(routes.new_stripe_checkout_path())
		.then(response => response.json())
		.then((json) => {
			const stripe = Stripe('pk_test_Y2HGxcv4B58lA5tEakifsdiC00JK3c15ec');

			stripe.redirectToCheckout({
			  sessionId: json.session_id
			}).then((result) => {
			  // Improve error logging
			  console.log(result.error.message)
			});
		})
	}
}
