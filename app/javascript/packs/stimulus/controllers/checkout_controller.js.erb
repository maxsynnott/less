import { Controller } from "stimulus"

export default class extends Controller {
	static targets = ["form", "payButton"]

	connect() {
		this.formatter = new Intl.NumberFormat("de", {
			style: "currency",
			currency: "EUR"
		})
	}

	updateBreakdown(breakdown) {
		$("#breakdown_subtotal").text(this.formatter.format(breakdown.subtotal))
		$("#breakdown_delivery").text(this.formatter.format(breakdown.delivery))
		$("#breakdown_total").text(this.formatter.format(breakdown.total))
	}

	enablePayButton() {
		const button = this.payButtonTarget

		button.style.cursor = "pointer"
		button.disabled = false
		button.classList.remove("btn-secondary")
		button.classList.add("btn-success")
	}

	disablePayButton() {
		const button = this.payButtonTarget

		button.style.cursor = "not-allowed"
		button.disabled = true
		button.classList.remove("btn-success")
		button.classList.add("btn-secondary")
	}
}
